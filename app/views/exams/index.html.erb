<h1>Exams</h1>
<div class="row">
  <%= form_for Exam.new do |f| %>
    <div class="col-md-4">
      <% @courses.each do |course| %>
        <div class="checkbox inline">
          <%= f.check_box :course_id, {}, course.id, false %> <%= course.name %> <br />
        </div>
      <% end %>
    </div>

    <div class="col-md-4">
      <%= f.hidden_field :status, value: 'not_check_yet' %>
      <%= f.submit "Submit" %>
    </div>
  <% end %>

  <div class="col-md-4"> 
    <% current_user.exams.ready_exams.each do |exam| %>
      <% unless exam.course.nil? %>
        <%= exam.course.name %>
        <%= link_to 'start', exam_path(exam) %> </br>
      <% end %>
    <% end %>
  </div>
</div>
<h1>Result:</h1>
<%= form_tag exams_path, method: "get", remote: true do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <div class="checkbox inline">
      <%= check_box_tag 'checked', 2, false %>
      Checked
    </div>
    <div class="checkbox inline">
      <%= check_box_tag 'uncheck', 1, false %>
      Not check yet
    </div>
    <%= submit_tag "Search by name of course" %>
  </p>
<% end %>
<div class="row">
  <div class="col-md-8">
    <div id="content">
      <% @exams.each do |exam| %>
        <%= exam.course.name %> |
        <% result = exam.result %>
        <% unless result.nil? %>
          Score: <%= result.score %>/<%= exam.course.questions.count %> |
          Date: <%= exam.updated_at %>
          <%= link_to 'View', exam_result_path(exam, result),
                                              class: "btn btn-xs btn-info" %>
          <%= link_to 'Export', exam_result_path(exam, result, format: :csv),
                                              class: "btn btn-xs btn-primary" %>
          <% if can? :destroy, exam %>
            <%= link_to 'Destroy', exam, class: "btn btn-xs btn-danger",
                      method: :delete, data: {confirm: 'Are you sure?'} %>
          <% end %>
        <% end %></br>
      <% end %>
    </div>
  </div>
</div>
